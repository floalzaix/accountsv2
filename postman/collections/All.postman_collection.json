{
  "info": {
    "_postman_id": "d1f79842-4fc9-4668-86e0-d964c00f6c84",
    "name": "All",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "register-test-script",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has id field\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response has email field\", function () {",
                  "    pm.expect(body).to.have.property(\"email\");",
                  "    pm.expect(body.email).to.equal(requestData.email);",
                  "});",
                  "",
                  "pm.test(\"Response has pseudo field\", function () {",
                  "    pm.expect(body).to.have.property(\"pseudo\");",
                  "    pm.expect(body.pseudo).to.equal(requestData.pseudo);",
                  "});",
                  "",
                  "pm.test(\"Response has status field\", function () {",
                  "    pm.expect(body).to.have.property(\"status\");",
                  "    pm.expect(body.status).to.equal(\"active\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have password field\", function () {",
                  "    pm.expect(body).to.not.have.property(\"password\");",
                  "    pm.expect(body).to.not.have.property(\"hash\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "89f3f050-ff59-4912-8922-adc8c1e07103",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"pseudo\": \"testt\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/register",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "460c7647-71a6-4f6a-909f-63c1eec75018",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has access_token field\", function () {",
                  "    pm.expect(body).to.have.property(\"access_token\");",
                  "    pm.expect(body.access_token).to.not.be.null;",
                  "    pm.expect(body.access_token).to.be.a(\"string\");",
                  "    pm.expect(body.access_token.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Response has user field\", function () {",
                  "    pm.expect(body).to.have.property(\"user\");",
                  "    pm.expect(body.user).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Response has token_type field\", function () {",
                  "    pm.expect(body).to.have.property(\"token_type\");",
                  "    pm.expect(body.token_type).to.equal(\"Bearer\");",
                  "});",
                  "",
                  "pm.test(\"User object has required fields\", function () {",
                  "    pm.expect(body.user).to.have.property(\"id\");",
                  "    pm.expect(body.user).to.have.property(\"email\");",
                  "    pm.expect(body.user).to.have.property(\"pseudo\");",
                  "    pm.expect(body.user).to.have.property(\"status\");",
                  "});",
                  "",
                  "pm.test(\"User email matches request email\", function () {",
                  "    pm.expect(body.user.email).to.equal(requestData.email);",
                  "});",
                  "",
                  "pm.test(\"User does not have password or hash fields\", function () {",
                  "    pm.expect(body.user).to.not.have.property(\"password\");",
                  "    pm.expect(body.user).to.not.have.property(\"hash\");",
                  "});",
                  "",
                  "pm.globals.set(\"access_token\", body.access_token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "05e11eb2-7797-40b7-8f38-cdfeb46555b9",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8e375195-0ad4-4cfe-82c8-68b0e8b96721",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register - User Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "register-user-exists-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"L'utilisateur existe déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"email\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "46312248-register-user-exists-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"pseudo\": \"testt\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/register",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login - User Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "login-user-not-found-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Mot de passe et/ou email incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have access_token\", function () {",
                  "    pm.expect(body).to.not.have.property(\"access_token\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "login-user-not-found-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"nonexistent@test.com\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login - Wrong Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "login-wrong-password-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Mot de passe et/ou email incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have access_token\", function () {",
                  "    pm.expect(body).to.not.have.property(\"access_token\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "46312248-login-wrong-password-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"password\": \"wrongpassword\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Me",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "703e1de9-5044-404e-a7d7-f8d1b8feaed5",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "16e0416e-170f-4f3b-98ff-622b7d76cd85",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "\r",
                  "const body = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Response body contains 'user'\", function () {\r",
                  "    pm.expect(body).to.have.property(\"id\");\r",
                  "    pm.expect(body).to.have.property(\"email\");\r",
                  "    pm.expect(body).to.have.property(\"pseudo\");\r",
                  "    pm.expect(body).to.have.property(\"status\");\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "bcffbe9b-6505-45e4-9acf-22ce190cb58e",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/me",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "27ad3ce7-2a19-45d8-a6ba-19c5509882c4"
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Create Category - Success (Level 0, no parents)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f9945cd8-914a-48b0-b28f-d6da895c0ce7",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_id\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level matches request level\", function () {",
                  "    pm.expect(body.level).to.equal(requestData.level);",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"User id is a valid UUID string\", function () {",
                  "    pm.expect(body.user_id).to.be.a(\"string\");",
                  "    pm.expect(body.user_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Parent id matches request parent_id\", function () {",
                  "    pm.expect(body.parent_id).to.equal(requestData.parent_id);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_0_id\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0fd66a77-ed95-42b7-9af3-7d5fcf967dc3",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "54e86eba-3439-44bc-80e3-29c9cf818342",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_id\": null\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Success (Level 1, one parent)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d9b3cc14-311c-4eb4-9867-41cd50593f4f",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_id\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level is 1\", function () {",
                  "    pm.expect(body.level).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent id matches category_level_0_id\", function () {",
                  "    const parentId = pm.globals.get(\"category_level_0_id\");",
                  "    pm.expect(body.parent_id).to.equal(parentId);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_1_id\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7c6ad924-124f-4105-a8b4-efd19e911463",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e0cb0032-550a-4c14-8f64-19e9f62c23cf",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Épicerie\",\r\n    \"level\": 1,\r\n    \"parent_id\": \"{{category_level_0_id}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Success (Level 1, one parent) Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d9b3cc14-311c-4eb4-9867-41cd50593f4f",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_id\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level is 1\", function () {",
                  "    pm.expect(body.level).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent id matches category_level_0_id\", function () {",
                  "    const parentId = pm.globals.get(\"category_level_0_id\");",
                  "    pm.expect(body.parent_id).to.equal(parentId);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_1_id2\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7c6ad924-124f-4105-a8b4-efd19e911463",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "75e0215e-65c0-4831-b8d1-54b5e849002a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Épicerie 2\",\r\n    \"level\": 1,\r\n    \"parent_id\": \"{{category_level_0_id}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "7e5aafd3-3cea-4ca9-9d87-41cfb311032f",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0385d170-ad80-4137-96bc-92087d38b15f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5060c1e1-22f8-40cb-bec2-64392485fabd",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_id\": null\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (name vide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8531fe55-da88-4f42-8201-0db3789ac2b3",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "370a1814-bc27-4d33-becf-0c6cfe2d8744",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "61caffc0-c120-46a8-a6f2-1c7210a36ed6",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"\",\r\n    \"level\": 0,\r\n    \"parent_id\": null\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (level invalide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "12aaf35d-e879-459e-bec2-4d069e425438",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7a1b0e23-6165-4c07-85ce-d0f29bd1f48b",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "7f09a45a-94c3-415f-833d-2ef0efcf455b",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Test Category\",\r\n    \"level\": 3,\r\n    \"parent_id\": null\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (missing required fields)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "946b2654-91f0-4b15-a7ed-6ce87b71e355",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b328df07-8599-4651-8d71-70d3f365eabc",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2c40640d-4673-4ee2-b002-40cdf6f62e69",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "84b06a0a-9c7a-4200-aeae-8b302bf08cd5",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie déjà existante\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe probablement déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b8f44d82-11b3-4388-831f-f6e8dc244d5d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "00f81627-b43c-496e-bf6b-44548971fec4",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_id\": null\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Categories - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8018b1dd-5d72-435d-a889-5ea639419a60",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    pm.expect(body).to.be.an(\"array\");",
                  "});",
                  "",
                  "if (body.length > 0) {",
                  "    pm.test(\"Each category has required fields\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category).to.have.property(\"id\");",
                  "            pm.expect(category).to.have.property(\"name\");",
                  "            pm.expect(category).to.have.property(\"user_id\");",
                  "            pm.expect(category).to.have.property(\"level\");",
                  "            pm.expect(category).to.have.property(\"parent_id\");",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category id is a valid UUID string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.id).to.be.a(\"string\");",
                  "            pm.expect(category.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category name is a string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.name).to.be.a(\"string\");",
                  "            pm.expect(category.name.length).to.be.above(0);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category user_id is a valid UUID string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.user_id).to.be.a(\"string\");",
                  "            pm.expect(category.user_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category level is a number between 0 and 3\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.level).to.be.a(\"number\");",
                  "            pm.expect(category.level).to.be.at.least(0);",
                  "            pm.expect(category.level).to.be.at.most(3);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category parent_id is null or a valid UUID string\", function () {",
                  "        body.forEach(function(category) {",
                  "            if (category.parent_id !== null) {",
                  "                pm.expect(category.parent_id).to.be.a(\"string\");",
                  "                pm.expect(category.parent_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "            }",
                  "        });",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "ff018132-fa5b-42bc-8ee2-3709af58129f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fff66db1-8170-4e06-9187-b26b72ff2492",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Categories - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fa10224a-ef39-42ae-83fd-28aa05254b05",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "fac64cbb-94f6-4bf7-a719-cbfb687d1cc6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "52632982-a120-4e95-ad3a-3ab1938193e8",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4a1b95cd-442f-45a6-8d27-62f800e0e189",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_id\");",
                  "});",
                  "",
                  "pm.test(\"Name matches updated name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Id matches category ID\", function () {",
                  "    pm.expect(body.id).to.equal(requestData.id);",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "24d17b53-3579-4a9a-89bb-c0dad6dd9429",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e0fddf06-7e97-469c-8536-be79ad66ce1e",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation Modifiée\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bbb41697-60b2-4503-bf7f-adbe99488192",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a55d9e55-8725-4e3b-a19a-5c1b3a010e62",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "c8105350-1219-4900-b003-b547aab1cd62",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"Nouveau Nom\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6de63fcc-7a0f-417e-8f57-82f34cc57d04",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has field detail\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b8c1e461-79f4-4762-ae10-3be7e0fce38d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8dd97fa6-c477-47e9-bd84-61b3d1e65577",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"00000000-0000-0000-0000-000000000000\",\r\n    \"name\": \"Nouveau Nom\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/00000000-0000-0000-0000-000000000000",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "00000000-0000-0000-0000-000000000000"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Name Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61fa49e1-f884-4937-998c-10897123bdf8",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "5f16f055-f300-4af4-9758-10cc89d3bca3",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "bf3b6ce7-205e-4bc3-9b82-6ece6fb12f95",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"Alimentation Modifiée\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Validation Error (name vide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e1220c12-b399-4a89-b433-82144931e090",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "6d19d88e-96e8-4cf7-85d8-f7b03329a530",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "d726d269-b7e1-4eef-993a-1371df14fe3e",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Validation Error (missing name)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a3c423c1-afe1-424f-82c5-1599a81ce2ec",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "37092637-801a-41a8-805e-148dcb507a21",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "08d597eb-0581-4321-8657-260e078d6bbd",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f56c8e6c-f568-47a7-a630-1de82a6b6085",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "1839e823-df10-4ca6-86a1-5bdebaade37a",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5180fa73-1d84-45d6-b1f6-9e6a43662fc6",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3d4aac83-1b2d-4771-ae4a-677de30f66d6",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie non trouvée\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"n'existe pas\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "3b797720-eec6-4a63-8a2d-d73e3d8b1266",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "7ea15283-664e-4251-8227-4ad7b79a7981",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/00000000-0000-0000-0000-000000000000",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "00000000-0000-0000-0000-000000000000"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "df75624d-5baa-4b1a-889e-2677c67fa824",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "05094813-f96a-46b7-ade2-3e4d9cc709fd",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const createRequest = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + pm.globals.get(\"access_token\"),",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie à supprimer\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createRequest, function (err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "    } else {",
                  "        const body = res.json();",
                  "        pm.globals.set(\"category_to_delete_id\", body.id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fa250fc2-2cc5-40a5-852c-175d1f1751ea",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_to_delete_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_to_delete_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "566cc0e5-83a5-48cd-b15a-bb5db16ef4fa"
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "Create Transaction - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-success-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"event_date\");",
                  "    pm.expect(body).to.have.property(\"motive\");",
                  "    pm.expect(body).to.have.property(\"to\");",
                  "    pm.expect(body).to.have.property(\"bank_date\");",
                  "    pm.expect(body).to.have.property(\"type\");",
                  "    pm.expect(body).to.have.property(\"amount\");",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"User id is a valid UUID string\", function () {",
                  "    pm.expect(body.user_id).to.be.a(\"string\");",
                  "    pm.expect(body.user_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Motive is a string\", function () {",
                  "    pm.expect(body.motive).to.be.a(\"string\");",
                  "    pm.expect(body.motive.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Amount is a number\", function () {",
                  "    pm.expect(body.amount).to.be.a(\"number\");",
                  "});",
                  "",
                  "pm.test(\"Type is a string\", function () {",
                  "    pm.expect(body.type).to.be.a(\"string\");",
                  "    pm.expect(body.type.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.globals.set(\"transaction_id\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-success-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat épicerie\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 45.50\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-unauthorized-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-unauthorized-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-unauthorized-001",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat épicerie\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"amount\": 45.50\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Validation Error (missing required fields)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-validation-error-test",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-validation-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-validation-error-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"motive\": \"Test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-already-exists-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"La transaction existe peut-être déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-already-exists-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-already-exists-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat épicerie\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 45.50\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Transactions - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "list-transactions-success-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    pm.expect(body).to.be.an(\"array\");",
                  "});",
                  "",
                  "if (body.length > 0) {",
                  "    pm.test(\"Each transaction has required fields\", function () {",
                  "        body.forEach(function(transaction) {",
                  "            pm.expect(transaction).to.have.property(\"id\");",
                  "            pm.expect(transaction).to.have.property(\"user_id\");",
                  "            pm.expect(transaction).to.have.property(\"event_date\");",
                  "            pm.expect(transaction).to.have.property(\"motive\");",
                  "            pm.expect(transaction).to.have.property(\"to\");",
                  "            pm.expect(transaction).to.have.property(\"bank_date\");",
                  "            pm.expect(transaction).to.have.property(\"type\");",
                  "            pm.expect(transaction).to.have.property(\"amount\");",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Transaction id is a valid UUID string\", function () {",
                  "        body.forEach(function(transaction) {",
                  "            pm.expect(transaction.id).to.be.a(\"string\");",
                  "            pm.expect(transaction.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Transaction amount is a number\", function () {",
                  "        body.forEach(function(transaction) {",
                  "            pm.expect(transaction.amount).to.be.a(\"number\");",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Transaction type is a string\", function () {",
                  "        body.forEach(function(transaction) {",
                  "            pm.expect(transaction.type).to.be.a(\"string\");",
                  "        });",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "list-transactions-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "list-transactions-success-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Transactions - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "list-transactions-unauthorized-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "754d3623-f79f-4151-ad68-dc9251b6923c",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "list-transactions-unauthorized-001",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-success-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"motive\");",
                  "    pm.expect(body).to.have.property(\"amount\");",
                  "});",
                  "",
                  "pm.test(\"Motive is a string\", function () {",
                  "    pm.expect(body.motive).to.be.a(\"string\");",
                  "    pm.expect(body.motive.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-success-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat épicerie modifié\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-unauthorized-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-unauthorized-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-unauthorized-001",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Nouveau motif\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-not-found-test",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has field detail\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-not-found-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-not-found-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"00000000-0000-0000-0000-000000000000\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Nouveau motif\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-already-exists-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-already-exists-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-already-exists-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat épicerie modifié\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Validation Error (missing required fields)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-validation-error-test",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-validation-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-validation-error-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Transaction - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "delete-transaction-success-test",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "delete-transaction-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const createRequest = {",
                  "    url: url + \"/\" + prefix + \"/transactions/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + pm.globals.get(\"access_token\"),",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            event_date: \"2024-01-15\",",
                  "            motive: \"Transaction à supprimer\",",
                  "            to: \"Épicerie Carrefour\",",
                  "            bank_date: \"2024-01-15\",",
                  "            type: \"debit\",",
                  "            category1_id: null,",
                  "            category2_id: null,",
                  "            category3_id: null,",
                  "            amount: 25.00",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createRequest, function (err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "    } else {",
                  "        const body = res.json();",
                  "        pm.globals.set(\"transaction_to_delete_id\", body.id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "delete-transaction-success-001",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/{{transaction_to_delete_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                "{{transaction_to_delete_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Transaction - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "delete-transaction-unauthorized-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "delete-transaction-unauthorized-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "delete-transaction-unauthorized-001",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/{{transaction_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                "{{transaction_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Transaction - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "delete-transaction-not-found-test",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "delete-transaction-not-found-prerequest",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "delete-transaction-not-found-001",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/00000000-0000-0000-0000-000000000000",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                "00000000-0000-0000-0000-000000000000"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Success with One Category (category1)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-one-category-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"event_date\");",
                  "    pm.expect(body).to.have.property(\"motive\");",
                  "    pm.expect(body).to.have.property(\"to\");",
                  "    pm.expect(body).to.have.property(\"bank_date\");",
                  "    pm.expect(body).to.have.property(\"type\");",
                  "    pm.expect(body).to.have.property(\"amount\");",
                  "});",
                  "",
                  "pm.test(\"Response has category1_id field\", function () {",
                  "    pm.expect(body).to.have.property(\"category1_id\");",
                  "    pm.expect(body.category1_id).to.not.be.null;",
                  "});",
                  "",
                  "pm.test(\"Category1_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category1_id).to.be.a(\"string\");",
                  "    pm.expect(body.category1_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Category2_id and category3_id are null\", function () {",
                  "    pm.expect(body.category2_id).to.be.null;",
                  "    pm.expect(body.category3_id).to.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-one-category-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer catégorie niveau 0",
                  "const createLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - One Cat\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "    pm.variables.set(\"cat_level_1_id\", level0.id);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-one-category-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec une catégorie\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": -45.50\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Success with Multiple Categories (category1 + category2)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-multiple-categories-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has category1_id and category2_id\", function () {",
                  "    pm.expect(body).to.have.property(\"category1_id\");",
                  "    pm.expect(body).to.have.property(\"category2_id\");",
                  "    pm.expect(body.category1_id).to.not.be.null;",
                  "    pm.expect(body.category2_id).to.not.be.null;",
                  "});",
                  "",
                  "pm.test(\"Category1_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category1_id).to.be.a(\"string\");",
                  "    pm.expect(body.category1_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Category2_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category2_id).to.be.a(\"string\");",
                  "    pm.expect(body.category2_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Category3_id is null\", function () {",
                  "    pm.expect(body.category3_id).to.be.null;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-multiple-categories-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer catégorie niveau 0",
                  "const createLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - Multiple Cat\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "    ",
                  "    // Créer catégorie niveau 1",
                  "    const createLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 1 - Multiple Cat\",",
                  "                level: 1,",
                  "                parent_id: level0.id",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createLevel1, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level1 = res.json();",
                  "        ",
                  "        // Créer catégorie niveau 2",
                  "        const createLevel2 = {",
                  "            url: url + \"/\" + prefix + \"/categories/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    name: \"Catégorie Test Niveau 2 - Multiple Cat\",",
                  "                    level: 2,",
                  "                    parent_id: level1.id",
                  "                })",
                  "            }",
                  "        };",
                  "        ",
                  "        pm.sendRequest(createLevel2, function(err, res) {",
                  "            if (err) {",
                  "                console.log(err);",
                  "                return;",
                  "            }",
                  "            const level2 = res.json();",
                  "            pm.variables.set(\"cat_level_1_id\", level0.id);",
                  "            pm.variables.set(\"cat_level_2_id\", level1.id);",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-multiple-categories-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec plusieurs catégories\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": \"{{cat_level_2_id}}\",\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Success with All Categories (category1 + category2 + category3)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-all-categories-test",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has all three category IDs\", function () {",
                  "    pm.expect(body).to.have.property(\"category1_id\");",
                  "    pm.expect(body).to.have.property(\"category2_id\");",
                  "    pm.expect(body).to.have.property(\"category3_id\");",
                  "    pm.expect(body.category1_id).to.not.be.null;",
                  "    pm.expect(body.category2_id).to.not.be.null;",
                  "    pm.expect(body.category3_id).to.not.be.null;",
                  "});",
                  "",
                  "pm.test(\"All category IDs are valid UUID strings\", function () {",
                  "    [body.category1_id, body.category2_id, body.category3_id].forEach(function(catId) {",
                  "        pm.expect(catId).to.be.a(\"string\");",
                  "        pm.expect(catId).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-all-categories-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer catégorie niveau 0",
                  "const createLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - All Cat\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0, function (err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "",
                  "    // Créer catégorie niveau 1",
                  "    const createLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 1 - All Cat\",",
                  "                level: 1,",
                  "                parent_id: level0.id",
                  "            })",
                  "        }",
                  "    };",
                  "",
                  "    pm.sendRequest(createLevel1, function (err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level1 = res.json();",
                  "",
                  "        // Créer catégorie niveau 2",
                  "        const createLevel2 = {",
                  "            url: url + \"/\" + prefix + \"/categories/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    name: \"Catégorie Test Niveau 2 - All Cat\",",
                  "                    level: 2,",
                  "                    parent_id: level1.id",
                  "                })",
                  "            }",
                  "        };",
                  "",
                  "        pm.sendRequest(createLevel2, function (err, res) { ",
                  "            if (err) {",
                  "                console.err(err);",
                  "                return;",
                  "            }",
                  "",
                  "            const level2 = res.json();",
                  "",
                  "            pm.variables.set(\"cat_level_1_id\", level0.id);",
                  "            pm.variables.set(\"cat_level_2_id\", level1.id);",
                  "            pm.variables.set(\"cat_level_3_id\", level2.id);",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-all-categories-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec toutes les catégories\",\r\n    \"to\": \"Épicerie Carrefour\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": \"{{cat_level_2_id}}\",\r\n    \"category3_id\": \"{{cat_level_3_id}}\",\r\n    \"amount\": 55.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Success with Categories",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-with-categories-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has category1_id and category2_id\", function () {",
                  "    pm.expect(body).to.have.property(\"category1_id\");",
                  "    pm.expect(body).to.have.property(\"category2_id\");",
                  "    pm.expect(body.category1_id).to.not.be.null;",
                  "    pm.expect(body.category2_id).to.not.be.null;",
                  "});",
                  "",
                  "pm.test(\"Category1_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category1_id).to.be.a(\"string\");",
                  "    pm.expect(body.category1_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Category2_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category2_id).to.be.a(\"string\");",
                  "    pm.expect(body.category2_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Transaction ID is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-with-categories-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer une transaction sans catégories",
                  "const createTransaction = {",
                  "    url: url + \"/\" + prefix + \"/transactions/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            event_date: \"2024-01-15\",",
                  "            motive: \"Transaction à mettre à jour\",",
                  "            to: \"Test\",",
                  "            bank_date: \"2024-01-15\",",
                  "            type: \"debit\",",
                  "            category1_id: null,",
                  "            category2_id: null,",
                  "            category3_id: null,",
                  "            amount: 30.00",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createTransaction, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const transaction = res.json();",
                  "    pm.variables.set(\"transaction_id_to_update\", transaction.id);",
                  "    ",
                  "    // Créer catégorie niveau 0",
                  "    const createLevel0 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 0 - Update\",",
                  "                level: 0,",
                  "                parent_id: null",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createLevel0, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level0 = res.json();",
                  "        ",
                  "        // Créer catégorie niveau 1",
                  "        const createLevel1 = {",
                  "            url: url + \"/\" + prefix + \"/categories/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    name: \"Catégorie Test Niveau 1 - Update\",",
                  "                    level: 1,",
                  "                    parent_id: level0.id",
                  "                })",
                  "            }",
                  "        };",
                  "        ",
                  "        pm.sendRequest(createLevel1, function(err, res) {",
                  "            if (err) {",
                  "                console.log(err);",
                  "                return;",
                  "            }",
                  "            const level1 = res.json();",
                  "            ",
                  "            // Créer catégorie niveau 2",
                  "            const createLevel2 = {",
                  "                url: url + \"/\" + prefix + \"/categories/\",",
                  "                method: \"POST\",",
                  "                header: {",
                  "                    \"Authorization\": \"Bearer \" + token,",
                  "                    \"Content-Type\": \"application/json\"",
                  "                },",
                  "                body: {",
                  "                    mode: \"raw\",",
                  "                    raw: JSON.stringify({",
                  "                        name: \"Catégorie Test Niveau 2 - Update\",",
                  "                        level: 2,",
                  "                        parent_id: level1.id",
                  "                    })",
                  "                }",
                  "            };",
                  "            ",
                  "            pm.sendRequest(createLevel2, function(err, res) {",
                  "                if (err) {",
                  "                    console.log(err);",
                  "                    return;",
                  "                }",
                  "                const level2 = res.json();",
                  "                pm.variables.set(\"cat_level_1_id\", level0.id);",
                  "                pm.variables.set(\"cat_level_2_id\", level1.id);",
                  "            });",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-with-categories-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id_to_update}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Transaction mise à jour avec catégories\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": \"{{cat_level_2_id}}\",\r\n    \"category3_id\": null,\r\n    \"amount\": 35.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Change Categories",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-change-categories-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has new category1_id\", function () {",
                  "    pm.expect(body).to.have.property(\"category1_id\");",
                  "    pm.expect(body.category1_id).to.not.be.null;",
                  "});",
                  "",
                  "pm.test(\"Category1_id is a valid UUID string\", function () {",
                  "    pm.expect(body.category1_id).to.be.a(\"string\");",
                  "    pm.expect(body.category1_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-change-categories-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer ancienne hiérarchie de catégories",
                  "const createOldLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Ancienne Catégorie Niveau 0\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createOldLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const oldLevel0 = res.json();",
                  "    ",
                  "    // Créer ancienne catégorie niveau 1",
                  "    const createOldLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Ancienne Catégorie Niveau 1\",",
                  "                level: 1,",
                  "                parent_id: oldLevel0.id",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createOldLevel1, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const oldLevel1 = res.json();",
                  "        pm.variables.set(\"old_cat_level_1_id\", oldLevel1.id);",
                  "        ",
                  "        // Créer transaction avec anciennes catégories",
                  "        const createTransaction = {",
                  "            url: url + \"/\" + prefix + \"/transactions/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    event_date: \"2024-01-15\",",
                  "                    motive: \"Transaction avec anciennes catégories\",",
                  "                    to: \"Test\",",
                  "                    bank_date: \"2024-01-15\",",
                  "                    type: \"debit\",",
                  "                    category1_id: oldLevel0.id,",
                  "                    category2_id: null,",
                  "                    category3_id: null,",
                  "                    amount: 40.00",
                  "                })",
                  "            }",
                  "        };",
                  "        ",
                  "        pm.sendRequest(createTransaction, function(err, res) {",
                  "            if (err) {",
                  "                console.log(err);",
                  "                return;",
                  "            }",
                  "            const transaction = res.json();",
                  "            pm.variables.set(\"transaction_id_to_change\", transaction.id);",
                  "            ",
                  "            // Créer nouvelle hiérarchie de catégories",
                  "            const createNewLevel0 = {",
                  "                url: url + \"/\" + prefix + \"/categories/\",",
                  "                method: \"POST\",",
                  "                header: {",
                  "                    \"Authorization\": \"Bearer \" + token,",
                  "                    \"Content-Type\": \"application/json\"",
                  "                },",
                  "                body: {",
                  "                    mode: \"raw\",",
                  "                    raw: JSON.stringify({",
                  "                        name: \"Nouvelle Catégorie Niveau 0\",",
                  "                        level: 0,",
                  "                        parent_id: null",
                  "                    })",
                  "                }",
                  "            };",
                  "            ",
                  "            pm.sendRequest(createNewLevel0, function(err, res) {",
                  "                if (err) {",
                  "                    console.log(err);",
                  "                    return;",
                  "                }",
                  "                const newLevel0 = res.json();",
                  "                ",
                  "                // Créer nouvelle catégorie niveau 1",
                  "                const createNewLevel1 = {",
                  "                    url: url + \"/\" + prefix + \"/categories/\",",
                  "                    method: \"POST\",",
                  "                    header: {",
                  "                        \"Authorization\": \"Bearer \" + token,",
                  "                        \"Content-Type\": \"application/json\"",
                  "                    },",
                  "                    body: {",
                  "                        mode: \"raw\",",
                  "                        raw: JSON.stringify({",
                  "                            name: \"Nouvelle Catégorie Niveau 1\",",
                  "                            level: 1,",
                  "                            parent_id: newLevel0.id",
                  "                        })",
                  "                    }",
                  "                };",
                  "                ",
                  "                pm.sendRequest(createNewLevel1, function(err, res) {",
                  "                    if (err) {",
                  "                        console.log(err);",
                  "                        return;",
                  "                    }",
                  "                    const newLevel1 = res.json();",
                  "                    pm.variables.set(\"cat_level_1_id\", newLevel0.id);",
                  "                });",
                  "            });",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-change-categories-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id_to_change}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Transaction avec nouvelles catégories\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 45.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - category2 without category1",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-category2-without-category1-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates category1 required\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"category 1\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "        pm.expect(detail.dev.toLowerCase()).to.include(\"category 1\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-category2-without-category1-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer catégorie niveau 0 parente",
                  "const createLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - Parent\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "    ",
                  "    // Créer catégorie niveau 1 (pour category2)",
                  "    const createLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 1 - Category2\",",
                  "                level: 1,",
                  "                parent_id: level0.id",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createLevel1, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level1 = res.json();",
                  "        pm.variables.set(\"cat_level_2_id\", level1.id);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-category2-without-category1-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec category2 sans category1\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": \"{{cat_level_2_id}}\",\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - category3 without category2",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-category3-without-category2-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates category2 required\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"category 2\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "        pm.expect(detail.dev.toLowerCase()).to.include(\"category 2\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-category3-without-category2-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer catégorie niveau 0 parente",
                  "const createLevel0 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - Parent\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "    ",
                  "    // Créer catégorie niveau 1",
                  "    const createLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 1 - Parent\",",
                  "                level: 1,",
                  "                parent_id: level0.id",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createLevel1, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level1 = res.json();",
                  "        ",
                  "        // Créer catégorie niveau 2 (pour category3)",
                  "        const createLevel2 = {",
                  "            url: url + \"/\" + prefix + \"/categories/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    name: \"Catégorie Test Niveau 2 - Category3\",",
                  "                    level: 2,",
                  "                    parent_id: level1.id",
                  "                })",
                  "            }",
                  "        };",
                  "        ",
                  "        pm.sendRequest(createLevel2, function(err, res) {",
                  "            if (err) {",
                  "                console.log(err);",
                  "                return;",
                  "            }",
                  "            const level2 = res.json();",
                  "            pm.variables.set(\"cat_level_3_id\", level2.id);",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-category3-without-category2-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec category3 sans category2\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": null,\r\n    \"category2_id\": null,\r\n    \"category3_id\": \"{{cat_level_3_id}}\",\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Wrong Parent ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-wrong-parent-id-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates parent id mismatch\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"parent\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "        pm.expect(detail.dev.toLowerCase()).to.include(\"parent\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-wrong-parent-id-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer première catégorie niveau 0",
                  "const createLevel0_1 = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie Test Niveau 0 - Parent 1\",",
                  "            level: 0,",
                  "            parent_id: null",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createLevel0_1, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0_1 = res.json();",
                  "    pm.variables.set(\"cat_level_1_id\", level0_1.id);",
                  "    ",
                  "    // Créer deuxième catégorie niveau 0",
                  "    const createLevel0_2 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 0 - Parent 2\",",
                  "                level: 0,",
                  "                parent_id: null",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "    pm.sendRequest(createLevel0_2, function(err, res) {",
                  "        if (err) {",
                  "            console.log(err);",
                  "            return;",
                  "        }",
                  "        const level0_2 = res.json();",
                  "        ",
                  "        // Créer catégorie niveau 1 avec le mauvais parent (level0_2 au lieu de level0_1)",
                  "        const createLevel1 = {",
                  "            url: url + \"/\" + prefix + \"/categories/\",",
                  "            method: \"POST\",",
                  "            header: {",
                  "                \"Authorization\": \"Bearer \" + token,",
                  "                \"Content-Type\": \"application/json\"",
                  "            },",
                  "            body: {",
                  "                mode: \"raw\",",
                  "                raw: JSON.stringify({",
                  "                    name: \"Catégorie Test Niveau 1 - Wrong Parent\",",
                  "                    level: 1,",
                  "                    parent_id: level0_2.id",
                  "                })",
                  "            }",
                  "        };",
                  "        ",
                  "        pm.sendRequest(createLevel1, function(err, res) {",
                  "            if (err) {",
                  "                console.log(err);",
                  "                return;",
                  "            }",
                  "            const level1 = res.json();",
                  "            pm.variables.set(\"cat_level_2_id\", level1.id);",
                  "        });",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-wrong-parent-id-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec parent_id incorrect\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_1_id}}\",\r\n    \"category2_id\": \"{{cat_level_2_id}}\",\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Invalid Category Level",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-invalid-level-test",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates level mismatch\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"level\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-invalid-level-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer une transaction valide",
                  "const createTransaction = {",
                  "    url: url + \"/\" + prefix + \"/transactions/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            event_date: \"2024-01-15\",",
                  "            motive: \"Transaction à mettre à jour avec niveau invalide\",",
                  "            to: \"Test\",",
                  "            bank_date: \"2024-01-15\",",
                  "            type: \"debit\",",
                  "            category1_id: null,",
                  "            category2_id: null,",
                  "            category3_id: null,",
                  "            amount: 30.00",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createTransaction, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const transaction = res.json();",
                  "    pm.variables.set(\"transaction_id_invalid_level\", transaction.id);",
                  "    ",
                  "    // Créer catégorie niveau 0 parente",
                  "    const createLevel0 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 0 - Update Parent\",",
                  "                level: 0,",
                  "                parent_id: null",
                  "            })",
                  "        }",
                  "    };",
                  "    ",
                  "pm.sendRequest(createLevel0, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level0 = res.json();",
                  "    ",
                  "    // Créer catégorie niveau 1 (qui ne devrait pas être utilisée pour category1)",
                  "    const createLevel1 = {",
                  "        url: url + \"/\" + prefix + \"/categories/\",",
                  "        method: \"POST\",",
                  "        header: {",
                  "            \"Authorization\": \"Bearer \" + token,",
                  "            \"Content-Type\": \"application/json\"",
                  "        },",
                  "        body: {",
                  "            mode: \"raw\",",
                  "            raw: JSON.stringify({",
                  "                name: \"Catégorie Test Niveau 1 - Update Invalid\",",
                  "                level: 1,",
                  "                parent_id: level0.id",
                  "            })",
                  "        }",
                  "    };",
                  "",
                  "pm.sendRequest(createLevel1, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const level1 = res.json();",
                  "    pm.variables.set(\"cat_level_0_invalid_update_id\", level1.id);",
                  "});",
                  "});",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-invalid-level-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id_invalid_level}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Transaction mise à jour avec catégorie niveau invalide\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"{{cat_level_0_invalid_update_id}}\",\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 35.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Transaction - Non-existent Category",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "create-transaction-non-existent-category-test",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates category not found\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"not found\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "create-transaction-non-existent-category-prerequest",
                "exec": [
                  "// Pas besoin de créer de catégories, on utilise un UUID inexistant"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "create-transaction-non-existent-category-001",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Achat avec catégorie inexistante\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"00000000-0000-0000-0000-000000000999\",\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 50.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction - Non-existent Category",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "update-transaction-non-existent-category-test",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Error has detail field\", function() {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Error message indicates category not found\", function() {",
                  "    const detail = body.detail;",
                  "    if (typeof detail === \"string\") {",
                  "        pm.expect(detail.toLowerCase()).to.include(\"not found\");",
                  "    } else if (typeof detail === \"object\") {",
                  "        pm.expect(detail).to.have.property(\"dev\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "update-transaction-non-existent-category-prerequest",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const token = pm.globals.get(\"access_token\");",
                  "",
                  "// Créer une transaction valide sans catégories",
                  "const createTransaction = {",
                  "    url: url + \"/\" + prefix + \"/transactions/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + token,",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            event_date: \"2024-01-15\",",
                  "            motive: \"Transaction à mettre à jour avec catégorie inexistante\",",
                  "            to: \"Test\",",
                  "            bank_date: \"2024-01-15\",",
                  "            type: \"debit\",",
                  "            category1_id: null,",
                  "            category2_id: null,",
                  "            category3_id: null,",
                  "            amount: 30.00",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createTransaction, function(err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "        return;",
                  "    }",
                  "    const transaction = res.json();",
                  "    pm.variables.set(\"transaction_id_non_existent\", transaction.id);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "update-transaction-non-existent-category-001",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{transaction_id_non_existent}}\",\r\n    \"event_date\": \"2024-01-15\",\r\n    \"motive\": \"Transaction mise à jour avec catégorie inexistante\",\r\n    \"to\": \"Test\",\r\n    \"bank_date\": \"2024-01-15\",\r\n    \"type\": \"debit\",\r\n    \"category1_id\": \"00000000-0000-0000-0000-000000000999\",\r\n    \"category2_id\": null,\r\n    \"category3_id\": null,\r\n    \"amount\": 35.00\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/transactions/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "transactions",
                ""
              ]
            }
          },
          "response": []
        }
      ],
      "id": "transactions-section-001"
    },
    {
      "name": "Details",
      "item": [
        {
          "name": "Details Setup",
          "item": [
            {
              "name": "Create Categories for Details Tests",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "create-categories-details-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "",
                      "pm.test(\"Response has id field\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "});",
                      "",
                      "const requestBody = pm.request.body.raw;",
                      "const requestData = JSON.parse(requestBody);",
                      "",
                      "if (requestData.level === 0) {",
                      "    pm.globals.set(\"details_category_level_0_id\", body.id);",
                      "} else if (requestData.level === 1) {",
                      "    if (!pm.globals.get(\"details_category_level_1_id\")) {",
                      "        pm.globals.set(\"details_category_level_1_id\", body.id);",
                      "    } else {",
                      "        pm.globals.set(\"details_category_level_1_id_2\", body.id);",
                      "    }",
                      "} else if (requestData.level === 2) {",
                      "    pm.globals.set(\"details_category_level_2_id\", body.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-categories-details-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"Alimentation Details\",\r\n    \"level\": 0,\r\n    \"parent_id\": null\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/categories/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "categories",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Category Level 1 for Details",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-category-level1-prerequest",
                    "exec": [
                      "const parentId = pm.globals.get(\"details_category_level_0_id\");",
                      "if (!parentId) {",
                      "    throw new Error(\"details_category_level_0_id not found. Please run 'Create Categories for Details Tests' first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    name: \"Épicerie Details\",",
                      "    level: 1,",
                      "    parent_id: parentId",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-category-level1-details-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "",
                      "pm.test(\"Response has id field\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "});",
                      "",
                      "pm.globals.set(\"details_category_level_1_id\", body.id);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-category-level1-details-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"Épicerie Details\",\r\n    \"level\": 1,\r\n    \"parent_id\": null\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/categories/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "categories",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Category Level 1 (Second) for Details",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-category-level1-2-prerequest",
                    "exec": [
                      "const parentId = pm.globals.get(\"details_category_level_0_id\");",
                      "if (!parentId) {",
                      "    throw new Error(\"details_category_level_0_id not found. Please run 'Create Categories for Details Tests' first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    name: \"Restaurant Details\",",
                      "    level: 1,",
                      "    parent_id: parentId",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-category-level1-2-details-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "",
                      "pm.test(\"Response has id field\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "});",
                      "",
                      "pm.globals.set(\"details_category_level_1_id_2\", body.id);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-category-level1-2-details-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"Restaurant Details\",\r\n    \"level\": 1,\r\n    \"parent_id\": null\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/categories/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "categories",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transactions - Revenues",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transactions-revenues-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "if (!category0Id) {",
                      "    throw new Error(\"details_category_level_0_id not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-01-15\",",
                      "    motive: \"Salaire janvier\",",
                      "    to: \"Employeur\",",
                      "    bank_date: \"2026-01-15\",",
                      "    type: \"checking\",",
                      "    category1_id: category0Id,",
                      "    category2_id: null,",
                      "    category3_id: null,",
                      "    amount: 100.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transactions-revenues-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "pm.test(\"Transaction created successfully\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "    pm.expect(body.amount).to.be.above(0);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transactions-revenues-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Revenue February",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-revenue-feb-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id = pm.globals.get(\"details_category_level_1_id\");",
                      "if (!category0Id || !category1Id) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-02-20\",",
                      "    motive: \"Salaire février\",",
                      "    to: \"Employeur\",",
                      "    bank_date: \"2026-02-20\",",
                      "    type: \"savings\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id,",
                      "    category3_id: null,",
                      "    amount: 200.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-revenue-feb-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-revenue-feb-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Revenue March",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-revenue-mar-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id2 = pm.globals.get(\"details_category_level_1_id_2\");",
                      "if (!category0Id || !category1Id2) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-03-10\",",
                      "    motive: \"Salaire mars\",",
                      "    to: \"Employeur\",",
                      "    bank_date: \"2026-03-10\",",
                      "    type: \"checking\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id2,",
                      "    category3_id: null,",
                      "    amount: 150.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-revenue-mar-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-revenue-mar-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transactions - Expenses",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transactions-expenses-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id = pm.globals.get(\"details_category_level_1_id\");",
                      "if (!category0Id || !category1Id) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-01-25\",",
                      "    motive: \"Achat épicerie\",",
                      "    to: \"Carrefour\",",
                      "    bank_date: \"2026-01-25\",",
                      "    type: \"checking\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id,",
                      "    category3_id: null,",
                      "    amount: -50.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transactions-expenses-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "pm.test(\"Transaction created with negative amount\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "    pm.expect(body.amount).to.be.below(0);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transactions-expenses-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Expense February",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-expense-feb-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id2 = pm.globals.get(\"details_category_level_1_id_2\");",
                      "if (!category0Id || !category1Id2) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-02-18\",",
                      "    motive: \"Restaurant\",",
                      "    to: \"Le Bistrot\",",
                      "    bank_date: \"2026-02-18\",",
                      "    type: \"cash\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id2,",
                      "    category3_id: null,",
                      "    amount: -75.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-expense-feb-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-expense-feb-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Expense March",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-expense-mar-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id = pm.globals.get(\"details_category_level_1_id\");",
                      "if (!category0Id || !category1Id) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-03-05\",",
                      "    motive: \"Courses\",",
                      "    to: \"Super U\",",
                      "    bank_date: \"2026-03-05\",",
                      "    type: \"checking\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id,",
                      "    category3_id: null,",
                      "    amount: -30.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-expense-mar-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-expense-mar-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transactions - Mixed (for Differences)",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transactions-mixed-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "if (!category0Id) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-01-20\",",
                      "    motive: \"Remboursement\",",
                      "    to: \"Amis\",",
                      "    bank_date: \"2026-01-20\",",
                      "    type: \"savings\",",
                      "    category1_id: category0Id,",
                      "    category2_id: null,",
                      "    category3_id: null,",
                      "    amount: 100.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transactions-mixed-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "const body = pm.response.json();",
                      "pm.test(\"Transaction created successfully\", function () {",
                      "    pm.expect(body).to.have.property(\"id\");",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transactions-mixed-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Mixed February",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-mixed-feb-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id = pm.globals.get(\"details_category_level_1_id\");",
                      "if (!category0Id || !category1Id) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-02-22\",",
                      "    motive: \"Vente\",",
                      "    to: \"Client\",",
                      "    bank_date: \"2026-02-22\",",
                      "    type: \"cash\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id,",
                      "    category3_id: null,",
                      "    amount: 200.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-mixed-feb-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-mixed-feb-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Transaction - Mixed March",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "create-transaction-mixed-mar-prerequest",
                    "exec": [
                      "const category0Id = pm.globals.get(\"details_category_level_0_id\");",
                      "const category1Id2 = pm.globals.get(\"details_category_level_1_id_2\");",
                      "if (!category0Id || !category1Id2) {",
                      "    throw new Error(\"Category IDs not found. Please run category setup tests first.\");",
                      "}",
                      "",
                      "const requestBody = {",
                      "    event_date: \"2026-03-12\",",
                      "    motive: \"Remboursement\",",
                      "    to: \"Famille\",",
                      "    bank_date: \"2026-03-12\",",
                      "    type: \"checking\",",
                      "    category1_id: category0Id,",
                      "    category2_id: category1Id2,",
                      "    category3_id: null,",
                      "    amount: 150.00",
                      "};",
                      "",
                      "pm.request.body.raw = JSON.stringify(requestBody, null, 2);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "create-transaction-mixed-mar-test",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "id": "create-transaction-mixed-mar-001",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{URL}}/{{PREFIX}}/transactions/",
                  "host": [
                    "{{URL}}"
                  ],
                  "path": [
                    "{{PREFIX}}",
                    "transactions",
                    ""
                  ]
                }
              },
              "response": []
            }
          ],
          "id": "details-setup-001"
        },
        {
          "name": "Get Details - Revenues Tab",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "get-details-revenues-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has rows field\", function () {",
                  "    pm.expect(body).to.have.property(\"rows\");",
                  "    pm.expect(body.rows).to.be.an(\"array\");",
                  "});",
                  "",
                  "pm.test(\"Response has total_row field\", function () {",
                  "    pm.expect(body).to.have.property(\"total_row\");",
                  "    pm.expect(body.total_row).to.be.an(\"object\");",
                  "    pm.expect(body.total_row).to.have.property(\"title\");",
                  "    pm.expect(body.total_row.title).to.equal(\"Total\");",
                  "});",
                  "",
                  "pm.test(\"Total row has monthly values\", function () {",
                  "    const totalRow = body.total_row;",
                  "    pm.expect(totalRow).to.have.property(\"january\");",
                  "    pm.expect(totalRow).to.have.property(\"february\");",
                  "    pm.expect(totalRow).to.have.property(\"march\");",
                  "});",
                  "",
                  "// Calculer les sommes attendues pour trans_type=checking et tab_type=revenues",
                  "// Revenues créées (2026) avec type checking et amount > 0:",
                  "// janvier=100 (revenue checking), février=0 (pas de revenue checking), mars=150 (revenue) + 150 (mixed checking) = 300",
                  "",
                  "pm.test(\"January total matches expected revenue\", function () {",
                  "    const janTotal = body.total_row.january || 0;",
                  "    pm.expect(janTotal).to.equal(100);",
                  "});",
                  "",
                  "pm.test(\"February total matches expected revenue\", function () {",
                  "    const febTotal = body.total_row.february || 0;",
                  "    pm.expect(febTotal).to.equal(0);",
                  "});",
                  "",
                  "pm.test(\"March total matches expected revenue\", function () {",
                  "    const marTotal = body.total_row.march || 0;",
                  "    pm.expect(marTotal).to.equal(300);",
                  "});",
                  "",
                  "pm.test(\"Total sum matches expected\", function () {",
                  "    const total = body.total_row.total || 0;",
                  "    pm.expect(total).to.equal(400);",
                  "});",
                  "",
                  "pm.test(\"Rows contain category data\", function () {",
                  "    if (body.rows.length > 0) {",
                  "        const firstRow = body.rows[0];",
                  "        pm.expect(firstRow).to.have.property(\"values\");",
                  "        pm.expect(firstRow.values).to.have.property(\"title\");",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "bcdaab6e-d921-4244-9ba8-cfdb87869ab6",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "get-details-revenues-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/details/?year=2026&trans_type=checking&tab_type=revenues",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "details",
                ""
              ],
              "query": [
                {
                  "key": "year",
                  "value": "2026"
                },
                {
                  "key": "trans_type",
                  "value": "checking"
                },
                {
                  "key": "tab_type",
                  "value": "revenues"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Details - Expenses Tab",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "get-details-expenses-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has rows field\", function () {",
                  "    pm.expect(body).to.have.property(\"rows\");",
                  "    pm.expect(body.rows).to.be.an(\"array\");",
                  "});",
                  "",
                  "pm.test(\"Response has total_row field\", function () {",
                  "    pm.expect(body).to.have.property(\"total_row\");",
                  "    pm.expect(body.total_row).to.have.property(\"title\");",
                  "    pm.expect(body.total_row.title).to.equal(\"Total\");",
                  "});",
                  "",
                  "// Calculer les sommes attendues pour trans_type=checking",
                  "// Expenses créées (2026) avec type checking:",
                  "// janvier=-50 (checking), février=0 (cash, pas checking), mars=-30 (checking)",
                  "",
                  "pm.test(\"January total matches expected expense\", function () {",
                  "    const janTotal = body.total_row.january || 0;",
                  "    pm.expect(janTotal).to.equal(-50);",
                  "});",
                  "",
                  "pm.test(\"February total matches expected expense\", function () {",
                  "    const febTotal = body.total_row.february || 0;",
                  "    pm.expect(febTotal).to.equal(0);",
                  "});",
                  "",
                  "pm.test(\"March total matches expected expense\", function () {",
                  "    const marTotal = body.total_row.march || 0;",
                  "    pm.expect(marTotal).to.equal(-30);",
                  "});",
                  "",
                  "pm.test(\"Total sum matches expected\", function () {",
                  "    const total = body.total_row.total || 0;",
                  "    pm.expect(total).to.equal(-80);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "get-details-expenses-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/details/?year=2026&trans_type=checking&tab_type=expenses",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "details",
                ""
              ],
              "query": [
                {
                  "key": "year",
                  "value": "2026",
                  "uuid": "181980a4-7185-4c67-b645-d358ce2518c9"
                },
                {
                  "key": "trans_type",
                  "value": "checking",
                  "uuid": "9ec19771-0a21-4b60-8d7a-acccba48ddb6"
                },
                {
                  "key": "tab_type",
                  "value": "expenses",
                  "uuid": "3ada6b8d-3ede-46ca-87d8-52c699e4c107"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Details - Differences Tab",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "get-details-differences-test",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has rows field\", function () {",
                  "    pm.expect(body).to.have.property(\"rows\");",
                  "    pm.expect(body.rows).to.be.an(\"array\");",
                  "});",
                  "",
                  "pm.test(\"Response has total_row field\", function () {",
                  "    pm.expect(body).to.have.property(\"total_row\");",
                  "    pm.expect(body.total_row).to.have.property(\"title\");",
                  "    pm.expect(body.total_row.title).to.equal(\"Total\");",
                  "});",
                  "",
                  "// Calculer les différences attendues pour trans_type=checking",
                  "// Transactions checking (pour tab_type=differences avec trans_type=checking):",
                  "// janvier: -50 (expense checking) + 100 (revenue checking) = 50",
                  "// février: 0 (pas de transaction checking)",
                  "// mars: -30 (expense checking) + 150 (revenue checking) + 150 (mixed checking) = 270",
                  "",
                  "pm.test(\"January difference matches expected\", function () {",
                  "    const janTotal = body.total_row.january || 0;",
                  "    pm.expect(janTotal).to.equal(50);",
                  "});",
                  "",
                  "pm.test(\"February difference matches expected\", function () {",
                  "    const febTotal = body.total_row.february || 0;",
                  "    pm.expect(febTotal).to.equal(0);",
                  "});",
                  "",
                  "pm.test(\"March difference matches expected\", function () {",
                  "    const marTotal = body.total_row.march || 0;",
                  "    pm.expect(marTotal).to.equal(270);",
                  "});",
                  "",
                  "pm.test(\"Total difference matches expected\", function () {",
                  "    const total = body.total_row.total || 0;",
                  "    pm.expect(total).to.equal(320);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "get-details-differences-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/details/?year=2026&trans_type=checking&tab_type=differences",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "details",
                ""
              ],
              "query": [
                {
                  "key": "year",
                  "value": "2026",
                  "uuid": "181980a4-7185-4c67-b645-d358ce2518c9"
                },
                {
                  "key": "trans_type",
                  "value": "checking",
                  "uuid": "9ec19771-0a21-4b60-8d7a-acccba48ddb6"
                },
                {
                  "key": "tab_type",
                  "value": "differences",
                  "uuid": "3ada6b8d-3ede-46ca-87d8-52c699e4c107"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Details - Missing Parameters",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "get-details-missing-params-test",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "get-details-missing-params-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/details/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "details",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Details - Invalid Tab Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "get-details-invalid-tab-type-test",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail contains validation error\", function () {",
                  "    if (Array.isArray(body.detail)) {",
                  "        const hasTabTypeError = body.detail.some(function(error) {",
                  "            return error.loc && error.loc.includes(\"tab_type\");",
                  "        });",
                  "        pm.expect(hasTabTypeError).to.be.true;",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "get-details-invalid-tab-type-001",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/details/?year=2026&trans_type=checking&tab_type=invalid_type",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "details",
                ""
              ],
              "query": [
                {
                  "key": "year",
                  "value": "2026",
                  "uuid": "181980a4-7185-4c67-b645-d358ce2518c9"
                },
                {
                  "key": "trans_type",
                  "value": "checking",
                  "uuid": "9ec19771-0a21-4b60-8d7a-acccba48ddb6"
                },
                {
                  "key": "tab_type",
                  "value": "invalid_type",
                  "uuid": "3ada6b8d-3ede-46ca-87d8-52c699e4c107"
                }
              ]
            }
          },
          "response": []
        }
      ],
      "id": "18d41657-13a8-45f2-8ece-5f3ebaf46b3d"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  }
}