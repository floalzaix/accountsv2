{
  "info": {
    "_postman_id": "d1f79842-4fc9-4668-86e0-d964c00f6c84",
    "name": "All",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "register-test-script",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has id field\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response has email field\", function () {",
                  "    pm.expect(body).to.have.property(\"email\");",
                  "    pm.expect(body.email).to.equal(requestData.email);",
                  "});",
                  "",
                  "pm.test(\"Response has pseudo field\", function () {",
                  "    pm.expect(body).to.have.property(\"pseudo\");",
                  "    pm.expect(body.pseudo).to.equal(requestData.pseudo);",
                  "});",
                  "",
                  "pm.test(\"Response has status field\", function () {",
                  "    pm.expect(body).to.have.property(\"status\");",
                  "    pm.expect(body.status).to.equal(\"active\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have password field\", function () {",
                  "    pm.expect(body).to.not.have.property(\"password\");",
                  "    pm.expect(body).to.not.have.property(\"hash\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "89f3f050-ff59-4912-8922-adc8c1e07103",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"pseudo\": \"testt\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/register",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "460c7647-71a6-4f6a-909f-63c1eec75018",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has access_token field\", function () {",
                  "    pm.expect(body).to.have.property(\"access_token\");",
                  "    pm.expect(body.access_token).to.not.be.null;",
                  "    pm.expect(body.access_token).to.be.a(\"string\");",
                  "    pm.expect(body.access_token.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Response has user field\", function () {",
                  "    pm.expect(body).to.have.property(\"user\");",
                  "    pm.expect(body.user).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Response has token_type field\", function () {",
                  "    pm.expect(body).to.have.property(\"token_type\");",
                  "    pm.expect(body.token_type).to.equal(\"Bearer\");",
                  "});",
                  "",
                  "pm.test(\"User object has required fields\", function () {",
                  "    pm.expect(body.user).to.have.property(\"id\");",
                  "    pm.expect(body.user).to.have.property(\"email\");",
                  "    pm.expect(body.user).to.have.property(\"pseudo\");",
                  "    pm.expect(body.user).to.have.property(\"status\");",
                  "});",
                  "",
                  "pm.test(\"User email matches request email\", function () {",
                  "    pm.expect(body.user.email).to.equal(requestData.email);",
                  "});",
                  "",
                  "pm.test(\"User does not have password or hash fields\", function () {",
                  "    pm.expect(body.user).to.not.have.property(\"password\");",
                  "    pm.expect(body.user).to.not.have.property(\"hash\");",
                  "});",
                  "",
                  "pm.globals.set(\"access_token\", body.access_token);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "05e11eb2-7797-40b7-8f38-cdfeb46555b9",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8e375195-0ad4-4cfe-82c8-68b0e8b96721",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Register - User Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "register-user-exists-test",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"L'utilisateur existe déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"email\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "46312248-register-user-exists-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"pseudo\": \"testt\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/register",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login - User Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "login-user-not-found-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Mot de passe et/ou email incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have access_token\", function () {",
                  "    pm.expect(body).to.not.have.property(\"access_token\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "login-user-not-found-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"nonexistent@test.com\",\r\n    \"password\": \"test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login - Wrong Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "login-wrong-password-test",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Mot de passe et/ou email incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"incorrect\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});",
                  "",
                  "pm.test(\"Response does not have access_token\", function () {",
                  "    pm.expect(body).to.not.have.property(\"access_token\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "46312248-login-wrong-password-001",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"email\": \"test@test.com\",\r\n    \"password\": \"wrongpassword\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/login",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Me",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "703e1de9-5044-404e-a7d7-f8d1b8feaed5",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "16e0416e-170f-4f3b-98ff-622b7d76cd85",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "\r",
                  "const body = pm.response.json();\r",
                  "\r",
                  "pm.test(\"Response body contains 'user'\", function () {\r",
                  "    pm.expect(body).to.have.property(\"id\");\r",
                  "    pm.expect(body).to.have.property(\"email\");\r",
                  "    pm.expect(body).to.have.property(\"pseudo\");\r",
                  "    pm.expect(body).to.have.property(\"status\");\r",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "bcffbe9b-6505-45e4-9acf-22ce190cb58e",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/auth/me",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "auth",
                "me"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "27ad3ce7-2a19-45d8-a6ba-19c5509882c4"
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Create Category - Success (Level 0, no parents)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f9945cd8-914a-48b0-b28f-d6da895c0ce7",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_ids\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level matches request level\", function () {",
                  "    pm.expect(body.level).to.equal(requestData.level);",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"User id is a valid UUID string\", function () {",
                  "    pm.expect(body.user_id).to.be.a(\"string\");",
                  "    pm.expect(body.user_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Parent ids is an empty array\", function () {",
                  "    pm.expect(body.parent_ids).to.be.an(\"array\");",
                  "    pm.expect(body.parent_ids.length).to.equal(0);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_0_id\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0fd66a77-ed95-42b7-9af3-7d5fcf967dc3",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "54e86eba-3439-44bc-80e3-29c9cf818342",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_ids\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Success (Level 1, one parent)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d9b3cc14-311c-4eb4-9867-41cd50593f4f",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_ids\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level is 1\", function () {",
                  "    pm.expect(body.level).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent ids contains exactly one element\", function () {",
                  "    pm.expect(body.parent_ids).to.be.an(\"array\");",
                  "    pm.expect(body.parent_ids.length).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent id matches category_level_0_id\", function () {",
                  "    const parentId = pm.globals.get(\"category_level_0_id\");",
                  "    pm.expect(body.parent_ids[0]).to.equal(parentId);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_1_id\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7c6ad924-124f-4105-a8b4-efd19e911463",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e0cb0032-550a-4c14-8f64-19e9f62c23cf",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Épicerie\",\r\n    \"level\": 1,\r\n    \"parent_ids\": [\"{{category_level_0_id}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Success (Level 1, one parent) Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d9b3cc14-311c-4eb4-9867-41cd50593f4f",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_ids\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level is 1\", function () {",
                  "    pm.expect(body.level).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent ids contains exactly one element\", function () {",
                  "    pm.expect(body.parent_ids).to.be.an(\"array\");",
                  "    pm.expect(body.parent_ids.length).to.equal(1);",
                  "});",
                  "",
                  "pm.test(\"Parent id matches category_level_0_id\", function () {",
                  "    const parentId = pm.globals.get(\"category_level_0_id\");",
                  "    pm.expect(body.parent_ids[0]).to.equal(parentId);",
                  "});",
                  "",
                  "pm.globals.set(\"category_level_1_id2\", body.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7c6ad924-124f-4105-a8b4-efd19e911463",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "75e0215e-65c0-4831-b8d1-54b5e849002a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Épicerie 2\",\r\n    \"level\": 1,\r\n    \"parent_ids\": [\"{{category_level_0_id}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Success (Level 2, multiple parents)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "7beb70de-31a4-4c51-b320-ede07ecaa143",
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_ids\");",
                  "});",
                  "",
                  "pm.test(\"Name matches request name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Level is 2\", function () {",
                  "    pm.expect(body.level).to.equal(2);",
                  "});",
                  "",
                  "pm.test(\"Parent ids contains exactly two elements\", function () {",
                  "    pm.expect(body.parent_ids).to.be.an(\"array\");",
                  "    pm.expect(body.parent_ids.length).to.equal(2);",
                  "});",
                  "",
                  "pm.test(\"Parent ids match saved variables\", function () {",
                  "    const parentId0 = pm.globals.get(\"category_level_1_id\");",
                  "    const parentId1 = pm.globals.get(\"category_level_1_id2\");",
                  "    pm.expect(body.parent_ids).to.include(parentId0);",
                  "    pm.expect(body.parent_ids).to.include(parentId1);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "e8611705-621a-4066-bddc-2443d375217c",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2edbbfcc-ae93-4edc-8eb1-a997597ad1f6",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Fruits et Légumes\",\r\n    \"level\": 2,\r\n    \"parent_ids\": [\"{{category_level_1_id}}\", \"{{category_level_1_id2}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "7e5aafd3-3cea-4ca9-9d87-41cfb311032f",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "0385d170-ad80-4137-96bc-92087d38b15f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5060c1e1-22f8-40cb-bec2-64392485fabd",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_ids\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (name vide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8531fe55-da88-4f42-8201-0db3789ac2b3",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "370a1814-bc27-4d33-becf-0c6cfe2d8744",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "61caffc0-c120-46a8-a6f2-1c7210a36ed6",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"\",\r\n    \"level\": 0,\r\n    \"parent_ids\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (level invalide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "12aaf35d-e879-459e-bec2-4d069e425438",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7a1b0e23-6165-4c07-85ce-d0f29bd1f48b",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "7f09a45a-94c3-415f-833d-2ef0efcf455b",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Test Category\",\r\n    \"level\": 5,\r\n    \"parent_ids\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Validation Error (missing required fields)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "946b2654-91f0-4b15-a7ed-6ce87b71e355",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b328df07-8599-4651-8d71-70d3f365eabc",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "2c40640d-4673-4ee2-b002-40cdf6f62e69",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Test\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "84b06a0a-9c7a-4200-aeae-8b302bf08cd5",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie déjà existante\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe probablement déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b8f44d82-11b3-4388-831f-f6e8dc244d5d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "00f81627-b43c-496e-bf6b-44548971fec4",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Alimentation\",\r\n    \"level\": 0,\r\n    \"parent_ids\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Invalid Level (level trop faible)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0562491c-46ee-4e99-bec7-b9806d210d67",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie déjà existante\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe probablement déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error message mentions invalid level\", function () {",
                  "    pm.expect(body.detail.dev).to.include(\"invalid level\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9b8db621-98aa-4fe7-9339-0d9e89eb4c3d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "4610b16e-55c1-4ccd-a6fd-c265d68311c6",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Catégorie avec niveau trop faible\",\r\n    \"level\": 2,\r\n    \"parent_ids\": [\"{{category_level_0_id}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Invalid Level (level trop haut)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6c47f830-6a1c-417e-9220-4371d67c2861",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie déjà existante\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe probablement déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error message mentions invalid level\", function () {",
                  "    pm.expect(body.detail.dev).to.include(\"invalid level\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "015e8d11-3d67-4e99-86e8-36a50122d4fc",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "a3d56e0a-cb9c-426a-a2fb-b5d71dc355e1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Catégorie avec niveau trop haut\",\r\n    \"level\": 0,\r\n    \"parent_ids\": [\"{{category_level_1_id}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Category - Invalid Level (même niveau)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f55bcd03-7fd6-45bb-b119-a272a133e49e",
                "exec": [
                  "pm.test(\"Status code is 500\", function () {",
                  "    pm.response.to.have.status(500);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie déjà existante\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"existe probablement déjà\");",
                  "});",
                  "",
                  "pm.test(\"Error message mentions invalid level\", function () {",
                  "    pm.expect(body.detail.dev).to.include(\"invalid level\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "84b1be51-5dee-4eda-b46c-a0d14db8bffc",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e86fc6fe-a7ea-434b-98be-54558c1665a5",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Catégorie avec même niveau\",\r\n    \"level\": 1,\r\n    \"parent_ids\": [\"{{category_level_1_id}}\"]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Categories - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8018b1dd-5d72-435d-a889-5ea639419a60",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    pm.expect(body).to.be.an(\"array\");",
                  "});",
                  "",
                  "if (body.length > 0) {",
                  "    pm.test(\"Each category has required fields\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category).to.have.property(\"id\");",
                  "            pm.expect(category).to.have.property(\"name\");",
                  "            pm.expect(category).to.have.property(\"user_id\");",
                  "            pm.expect(category).to.have.property(\"level\");",
                  "            pm.expect(category).to.have.property(\"parent_ids\");",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category id is a valid UUID string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.id).to.be.a(\"string\");",
                  "            pm.expect(category.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category name is a string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.name).to.be.a(\"string\");",
                  "            pm.expect(category.name.length).to.be.above(0);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category user_id is a valid UUID string\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.user_id).to.be.a(\"string\");",
                  "            pm.expect(category.user_id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category level is a number between 0 and 3\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.level).to.be.a(\"number\");",
                  "            pm.expect(category.level).to.be.at.least(0);",
                  "            pm.expect(category.level).to.be.at.most(3);",
                  "        });",
                  "    });",
                  "",
                  "    pm.test(\"Category parent_ids is an array\", function () {",
                  "        body.forEach(function(category) {",
                  "            pm.expect(category.parent_ids).to.be.an(\"array\");",
                  "        });",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "ff018132-fa5b-42bc-8ee2-3709af58129f",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fff66db1-8170-4e06-9187-b26b72ff2492",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Categories - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fa10224a-ef39-42ae-83fd-28aa05254b05",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "52632982-a120-4e95-ad3a-3ab1938193e8",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4a1b95cd-442f-45a6-8d27-62f800e0e189",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "const requestBody = pm.request.body.raw;",
                  "const requestData = JSON.parse(requestBody);",
                  "",
                  "pm.test(\"Response has all required fields\", function () {",
                  "    pm.expect(body).to.have.property(\"id\");",
                  "    pm.expect(body).to.have.property(\"name\");",
                  "    pm.expect(body).to.have.property(\"user_id\");",
                  "    pm.expect(body).to.have.property(\"level\");",
                  "    pm.expect(body).to.have.property(\"parent_ids\");",
                  "});",
                  "",
                  "pm.test(\"Name matches updated name\", function () {",
                  "    pm.expect(body.name).to.equal(requestData.name);",
                  "});",
                  "",
                  "pm.test(\"Id matches category ID\", function () {",
                  "    pm.expect(body.id).to.equal(requestData.id);",
                  "});",
                  "",
                  "pm.test(\"Id is a valid UUID string\", function () {",
                  "    pm.expect(body.id).to.be.a(\"string\");",
                  "    pm.expect(body.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "24d17b53-3579-4a9a-89bb-c0dad6dd9429",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "e0fddf06-7e97-469c-8536-be79ad66ce1e",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"Alimentation Modifiée\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bbb41697-60b2-4503-bf7f-adbe99488192",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a55d9e55-8725-4e3b-a19a-5c1b3a010e62",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "c8105350-1219-4900-b003-b547aab1cd62",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"Nouveau Nom\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6de63fcc-7a0f-417e-8f57-82f34cc57d04",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie non trouvée ou nom déjà utilisé\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"n'existe pas\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "b8c1e461-79f4-4762-ae10-3be7e0fce38d",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "8dd97fa6-c477-47e9-bd84-61b3d1e65577",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"00000000-0000-0000-0000-000000000000\",\r\n    \"name\": \"Nouveau Nom\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/00000000-0000-0000-0000-000000000000",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "00000000-0000-0000-0000-000000000000"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Name Already Exists",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61fa49e1-f884-4937-998c-10897123bdf8",
                "exec": [
                  "pm.test(\"Status code is 409\", function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie non trouvée ou nom déjà utilisé\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"nom donné est déjà utilisé\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "5f16f055-f300-4af4-9758-10cc89d3bca3",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "bf3b6ce7-205e-4bc3-9b82-6ece6fb12f95",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"Épicerie\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Validation Error (name vide)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e1220c12-b399-4a89-b433-82144931e090",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "6d19d88e-96e8-4cf7-85d8-f7b03329a530",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "d726d269-b7e1-4eef-993a-1371df14fe3e",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\",\r\n    \"name\": \"\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Category - Validation Error (missing name)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a3c423c1-afe1-424f-82c5-1599a81ce2ec",
                "exec": [
                  "pm.test(\"Status code is 422\", function () {",
                  "    pm.response.to.have.status(422);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});",
                  "",
                  "pm.test(\"Detail is an array of validation errors\", function () {",
                  "    pm.expect(body.detail).to.be.an(\"array\");",
                  "    pm.expect(body.detail.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test(\"Each error has required fields\", function () {",
                  "    body.detail.forEach(function(error) {",
                  "        pm.expect(error).to.have.property(\"loc\");",
                  "        pm.expect(error).to.have.property(\"msg\");",
                  "        pm.expect(error).to.have.property(\"type\");",
                  "    });",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "37092637-801a-41a8-805e-148dcb507a21",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "08d597eb-0581-4321-8657-260e078d6bbd",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"id\": \"{{category_level_0_id}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f56c8e6c-f568-47a7-a630-1de82a6b6085",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "1839e823-df10-4ca6-86a1-5bdebaade37a",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5180fa73-1d84-45d6-b1f6-9e6a43662fc6",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3d4aac83-1b2d-4771-ae4a-677de30f66d6",
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "const body = pm.response.json();",
                  "",
                  "pm.test(\"Response has detail field\", function () {",
                  "    pm.expect(body).to.have.property(\"detail\");",
                  "    pm.expect(body.detail).to.be.an(\"object\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_title field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_title\");",
                  "    pm.expect(body.detail.user_safe_title).to.equal(\"Catégorie non trouvée\");",
                  "});",
                  "",
                  "pm.test(\"Error has user_safe_description field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"user_safe_description\");",
                  "    pm.expect(body.detail.user_safe_description).to.include(\"n'existe pas\");",
                  "});",
                  "",
                  "pm.test(\"Error has dev field\", function () {",
                  "    pm.expect(body.detail).to.have.property(\"dev\");",
                  "    pm.expect(body.detail.dev).to.be.a(\"string\");",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "3b797720-eec6-4a63-8a2d-d73e3d8b1266",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "7ea15283-664e-4251-8227-4ad7b79a7981",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/00000000-0000-0000-0000-000000000000",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "00000000-0000-0000-0000-000000000000"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Category - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "df75624d-5baa-4b1a-889e-2677c67fa824",
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});",
                  "",
                  "pm.test(\"Response has no body\", function () {",
                  "    pm.expect(pm.response.body).to.be.empty;",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "05094813-f96a-46b7-ade2-3e4d9cc709fd",
                "exec": [
                  "const url = pm.globals.get(\"URL\") || pm.environment.get(\"URL\");",
                  "const prefix = pm.globals.get(\"PREFIX\") || pm.environment.get(\"PREFIX\");",
                  "const createRequest = {",
                  "    url: url + \"/\" + prefix + \"/categories/\",",
                  "    method: \"POST\",",
                  "    header: {",
                  "        \"Authorization\": \"Bearer \" + pm.globals.get(\"access_token\"),",
                  "        \"Content-Type\": \"application/json\"",
                  "    },",
                  "    body: {",
                  "        mode: \"raw\",",
                  "        raw: JSON.stringify({",
                  "            name: \"Catégorie à supprimer\",",
                  "            level: 0,",
                  "            parent_ids: []",
                  "        })",
                  "    }",
                  "};",
                  "",
                  "pm.sendRequest(createRequest, function (err, res) {",
                  "    if (err) {",
                  "        console.log(err);",
                  "    } else {",
                  "        const body = res.json();",
                  "        pm.globals.set(\"category_to_delete_id\", body.id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "fa250fc2-2cc5-40a5-852c-175d1f1751ea",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{URL}}/{{PREFIX}}/categories/{{category_level_0_id}}",
              "host": [
                "{{URL}}"
              ],
              "path": [
                "{{PREFIX}}",
                "categories",
                "{{category_level_0_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "566cc0e5-83a5-48cd-b15a-bb5db16ef4fa"
    }
  ]
}